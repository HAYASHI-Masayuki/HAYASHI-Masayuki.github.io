---
title: "JavascriptのPromiseをわかりやすく説明する"
date: 2022-07-21T19:36:02+09:00
draft: true
---

## この文章を書いた理由と、目的

TODO


## そもそも非同期処理とはなにか

JavaScriptでは基本的に、ソースコードは上から下に処理され、ある処理が完了するまで次の処理に移ることはありません。それに対し非同期処理は、ソースコードの流れとは別に処理されます。

```javascript
console.log(1)
console.log(2)
// 1
// 2
```

```javascript
setTimeout(() => console.log(1), 3000)
console.log(2)
// 2
// (3秒後に)1
```

適当な環境でこれらのコードを実行すると、最初のコード例では先に1が表示されますが、2つ目のコード例では、大抵の環境では先に2が表示されます。

なぜかというと、`setTimeout`関数は、第1引数に渡した関数を、第2引数のミリ秒後(この場合は3000ミリ秒＝3秒)後に、非同期で実行する関数だからです。

`setTimeout`が、渡した関数を同期で実行する関数だった場合、2つ目のコード例では、実行の約3秒後に1が表示され、すぐ後に2が表示されるはずです。

JavaScriptで書くためには`Promise`等の知識が必要となり本末転倒になるため、3秒待つ部分は省略しましたが、`setTimeout`が同期であれば、つまりこのような関数であるはずです。

```javascript
const setTimeoutNow = (f, ms) => f() // 3000ms待つのは難しいため待たない

setTimeoutNow(() => console.log(1), 3000)
console.log(2)
// 1
// 2
```

非同期処理に関しては、この記事ではこれ以上の説明はしません。`Promise`は非同期処理を扱うものですが、理解するために必要なことの大半は非同期処理自体とは関係ないと思うからです。


## Promiseとはなにか

* Promiseは、ある関数を非同期に、処理させるためのラッパオブジェクト。
* ただ非同期にするだけなら、setTimeoutでいいが、後続する処理やエラー処理を簡単に設定できるのが特長。


## async/await

TODO


## 追加で知っておきたいこと、またPromiseの罠

TODO


{{< license >}}


